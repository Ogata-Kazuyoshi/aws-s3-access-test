# AWS S3 サービス内のデータ取得

### 注意事項

- アクセスキーや、シークレットキーを使用して AWS の S3 にアクセスに行くため、”バックエンド”からアクセして大事なキーは環境変数で見えないようにすること

- 単純にゲットして取れるデータは下記で、特に URL などの情報は取れない

  - Body: オブジェクトのコンテンツを含む Buffer。
  - ContentType: オブジェクトの MIME タイプ。
  - Metadata: オブジェクトに関連付けられたメタデータ。
  - LastModified: オブジェクトが最後に変更された日時。
  - ContentLength: オブジェクトのサイズ（バイト単位）。

- バックエンドが S3 にアクセスした際に、データへアクセスできる「期限付き URL」を発行して、フロントに返却するなどの方法をとる。フロントからアクセスに行くので、S3 側のポリシーで「限定された IP」だけを許可するポリシーをアタッチする

### 設定方法

1. S3 バケットの作成
2. S3 への Full アクセスがアタッチされた IAM ユーザーを作成
3. 上記 IAM ユーザーで KMS を発行(Key Management Service)。ここで取得できるアクセスキーとシークレットキーを使用して S3 にアクセスにいく(.env で持って、Git 管理しないこと!!!)
4. コード例は access.js を参照
